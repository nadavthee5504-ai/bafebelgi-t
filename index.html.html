<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×•×•×¤×œ ×‘×œ×’×™ ×¢×œ ××§×œ | ×”×–×× ×”</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --waffle-color: #ff9f47;
            --waffle-bg: #fff4e4;
            --main-font: 'Heebo', sans-serif;
        }

        body { 
            font-family: var(--main-font);
            background: #ffe9d1;
            margin: 0;
            padding: 0;
            direction: rtl;
        }

        .box {
            max-width: 600px;
            margin: 20px auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .title {
            font-size: 32px;
            font-weight: 700;
            text-align: center;
            margin: 20px 0 10px;
            color: #4a2c1b;
        }

        .price {
            text-align: center;
            font-size: 22px;
            margin-bottom: 10px; /* ×¦××¦×•× ×”××¨×•×•×— ×›×“×™ ×œ×¤× ×•×ª ××§×•× ×œ×§×™×©×•×¨ ×”×˜×œ×¤×•× ×™ */
            color: #884a22;
        }
        
        /* ×¢×™×¦×•×‘ ×”×§×™×©×•×¨ ×”×˜×œ×¤×•× ×™ */
        .phone-link-container {
            text-align: center; 
            margin-bottom: 20px;
        }
        .phone-link {
            color: #4a2c1b; 
            font-weight: bold; 
            text-decoration: none; 
            border: 1px solid #ff9f47; 
            padding: 8px 15px; 
            border-radius: 8px; 
            background-color: #fff3e6; /* ×¨×§×¢ ×‘×”×™×¨ ×œ×›×¤×ª×•×¨ */
            display: inline-block;
            transition: background-color 0.2s;
        }
        .phone-link:hover {
            background-color: #ff9f47;
            color: white;
        }
        /* ×¡×•×£ ×¢×™×¦×•×‘ ×”×§×™×©×•×¨ ×”×˜×œ×¤×•× ×™ */


        label { font-weight: 500; margin-top: 15px; display: block; color: #333; }

        input:not([type="radio"]):not([type="checkbox"]), textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 8px;
            border: 1px solid #ddd;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus {
            border-color: var(--waffle-color);
            outline: none;
        }

        input[type="time"] { 
            max-width: 150px;
        }

        .waffle-box {
            background: var(--waffle-bg);
            padding: 18px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #ff9f4730;
        }
        
        .waffle-box input[type="checkbox"] { display: none; }

        .waffle-box input[type="checkbox"] + label {
            background-color: #f7f7f7;
            padding: 7px 12px;
            border-radius: 15px;
            border: 1px solid #ddd;
            display: inline-block;
            margin-left: 5px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .waffle-box input[type="checkbox"]:checked + label {
            background-color: var(--waffle-color);
            color: white;
            border-color: var(--waffle-color);
            box-shadow: 0 2px 4px #0003;
            transform: scale(1.03);
        }

        .topping-group {
            margin-top: 12px;
            margin-bottom: 15px;
            font-weight: normal;
        }
        
        .btn {
            width: 100%;
            background: var(--waffle-color);
            padding: 15px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            border: none;
            margin-top: 25px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(255, 159, 71, 0.4);
            transition: background 0.2s, transform 0.1s;
        }
        
        .btn:hover:not(:disabled) {
            background: #e08e40;
            box-shadow: 0 6px 8px rgba(255, 159, 71, 0.5);
        }

        .btn:active:not(:disabled) {
            transform: translateY(2px);
            box-shadow: 0 2px 4px rgba(255, 159, 71, 0.5);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .payment-info {
            background: #fff3c4;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
            font-weight: 700;
            color: #d67a00;
            border-left: 5px solid var(--waffle-color);
        }
        
        .required-star {
            color: red;
            font-size: 14px;
            margin-right: 5px;
        }
        
        .payment-upload-info {
            background-color: #fcebeb;
            color: #c90000;
            border: 1px solid #c90000;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
            font-size: 14px;
        }
        
        .error-border {
            border: 2px solid red !important;
        }
        .error-text {
            color: red;
            font-size: 12px;
            margin-top: -5px;
            display: none;
        }
    </style>
</head>
<body>

<div class="box">

    <div class="title">×•×•×¤×œ ×‘×œ×’×™ ×¢×œ ××§×œ ğŸ§‡</div>
    <div class="price">××—×™×¨: 7 ×©"×— ×œ×•×•×¤×œ</div>
    
    <div class="phone-link-container">
        <a href="tel:972553085504" class="phone-link">
            ğŸ“ ×”×ª×§×©×¨×• ××œ×™× ×•: 055-3085504
        </a>
    </div>
    <label for="name">×©× ××œ×: <span class="required-star">*</span></label>
    <input id="name" required>
    <div id="error-name" class="error-text">×©×“×” ×—×•×‘×”</div>

    <label for="phone">×˜×œ×¤×•×Ÿ: <span class="required-star">*</span></label>
    <input id="phone" type="tel" required> 
    <div id="error-phone" class="error-text">×©×“×” ×—×•×‘×”</div>
    
    <label for="time">×©×¢×” ×¨×¦×•×™×” ×œ××™×¡×•×£ (16:00-20:00): <span class="required-star">*</span></label>
    <input id="time" type="time" min="16:00" max="20:00" required>
    <div id="error-time" class="error-text">× × ×œ×‘×—×•×¨ ×©×¢×” ×‘×ª×—×•× 16:00 ×¢×“ 20:00</div>


    <label for="qty">×›××•×ª ×•×•×¤×œ×™×:</label>
    <input id="qty" type="number" min="1" max="10" value="1">

    <div id="total" style="margin-top:10px; font-weight:bold; font-size: 18px;">
        ×¡×”"×›: 7 ×©"×—
    </div>

    <div id="waffles"></div>

    <label>×××¦×¢×™ ×ª×©×œ×•×: <span class="required-star">*</span></label>
    <div id="payment-options">
        <input type="radio" name="pay" value="×‘×™×˜" id="pay_bit"><label for="pay_bit"> ×‘×™×˜</label><br>
        <input type="radio" name="pay" value="×¤×™×™×‘×•×§×¡" id="pay_fb"><label for="pay_fb"> ×¤×™×™×‘×•×§×¡</label><br>
        <input type="radio" name="pay" value="××–×•××Ÿ" id="pay_cash"><label for="pay_cash"> ××–×•××Ÿ</label><br>
    </div>
    <div id="error-pay" class="error-text">× × ×œ×‘×—×•×¨ ×××¦×¢×™ ×ª×©×œ×•×</div>


    <div id="paymentInfo" class="payment-info"></div>
    
    <div id="paymentUploadInfo" class="payment-upload-info">
        **×—×©×•×‘:** ×œ××—×¨ ×©×œ×™×—×ª ×”×”×•×“×¢×”, ×× × ×—×–×•×¨ ×œ×©×™×—×” ×•×¦×¨×£ ××ª ×ª××•× ×ª ××™×©×•×¨ ×”×ª×©×œ×•× (×§×‘×œ×”/×¦×™×œ×•× ××¡×š) ×œ×•×•××˜×¡××¤.
    </div>

    <label for="notes">×”×¢×¨×•×ª:</label>
    <textarea id="notes" placeholder="×›××Ÿ × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ×”×¢×¨×•×ª ×›×œ×œ×™×•×ª ×œ×”×–×× ×”..."></textarea>

    <button id="sendBtn" class="btn" onclick="sendUnifiedOrder()">×©×œ×™×—×ª ×”×–×× ×” ×œ×•×•××˜×¡××¤</button>
    <button class="btn" style="background: #ccc; margin-top: 10px;" onclick="resetForm()">××™×¤×•×¡ ×˜×•×¤×¡</button>

</div>

<script>
const PRICE = 7;
const MY_PHONE_NUMBER = "972553085504"; // ××¡×¤×¨ ×”×™×¢×“ ×‘×•×•××˜×¡××¤

function updateWaffles() {
    const qtyInput = document.getElementById("qty");
    let qty = Number(qtyInput.value);

    if (qty < 1 || isNaN(qty)) {
        qty = 1;
        qtyInput.value = 1;
    }
    if (qty > 10) {
        qty = 10;
        qtyInput.value = 10;
    }
    
    document.getElementById("total").innerText = "×¡×”\"×›: " + (qty * PRICE) + " ×©\"×—";

    let html = "";
    for (let i = 1; i <= qty; i++) {
        html += `
            <div class="waffle-box">
                <b>ğŸ§‡ ×•×•×¤×œ #${i}</b>
                <div class="topping-group">
                    <label>×¨×˜×‘×™×:</label>
                    <input type="checkbox" id="sauce_choc_${i}" name="sauce_${i}" value="×¡×™×¨×•×¤ ×©×•×§×•×œ×“"><label for="sauce_choc_${i}">×¡×™×¨×•×¤ ×©×•×§×•×œ×“</label>
                    <input type="checkbox" id="sauce_maple_${i}" name="sauce_${i}" value="××™×™×¤×œ"><label for="sauce_maple_${i}">××™×™×¤×œ</label>
                    <input type="checkbox" id="sauce_milk_${i}" name="sauce_${i}" value="×¨×™×‘×ª ×—×œ×‘"><label for="sauce_milk_${i}">×¨×™×‘×ª ×—×œ×‘</label>
                </div>
                <div class="topping-group">
                    <label>×ª×•×¡×¤×•×ª (×§×¨×× ×¦'):</label>
                    <input type="checkbox" id="top_oreo_${i}" name="top_${i}" value="××•×¨××•"><label for="top_oreo_${i}">××•×¨××•</label>
                    <input type="checkbox" id="top_lotus_${i}" name="top_${i}" value="×œ×•×˜×•×¡"><label for="top_lotus_${i}">×œ×•×˜×•×¡</label>
                    <input type="checkbox" id="top_click_${i}" name="top_${i}" value="×§×œ×™×§"><label for="top_click_${i}">×§×œ×™×§</label>
                    <input type="checkbox" id="top_lentils_${i}" name="top_${i}" value="×¢×“×©×™×"><label for="top_lentils_${i}">×¢×“×©×™×</label>
                </div>
                <div class="topping-group">
                    <label>××¢×œ (×¤×™× ×™×©):</label>
                    <input type="checkbox" id="extra_cream_${i}" name="extra_${i}" value="×§×¦×¤×ª"><label for="extra_cream_${i}">×§×¦×¤×ª</label>
                    <input type="checkbox" id="extra_sug_${i}" name="extra_${i}" value="×¡×•×›×¨×™×•×ª"><label for="extra_sug_${i}">×¡×•×›×¨×™×•×ª</label>
                </div>
            </div>
        `;
    }
    document.getElementById("waffles").innerHTML = html;
}

document.getElementById("qty").addEventListener("input", updateWaffles);
document.addEventListener("DOMContentLoaded", updateWaffles);


function resetForm() {
    if (confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××¤×¡ ××ª ×›×œ ×¤×¨×˜×™ ×”×˜×•×¤×¡?")) {
        document.getElementById("name").value = "";
        document.getElementById("phone").value = "";
        document.getElementById("time").value = "";
        document.getElementById("qty").value = 1;
        document.getElementById("notes").value = "";

        document.querySelectorAll('input[name="pay"]').forEach(radio => radio.checked = false);
        
        document.getElementById("paymentInfo").style.display = "none";
        document.getElementById("paymentUploadInfo").style.display = "none";
        
        document.querySelectorAll('.error-text').forEach(el => el.style.display = "none");
        document.querySelectorAll('input, textarea, #payment-options').forEach(el => el.classList.remove("error-border"));

        updateWaffles();
    }
}

function validateField(id, errorTextId, validationFn, errorMessage) {
    const input = document.getElementById(id);
    const errorEl = document.getElementById(errorTextId);
    let isValid = validationFn(input.value);

    if (!isValid) {
        input.classList.add("error-border");
        errorEl.innerText = errorMessage;
        errorEl.style.display = "block";
    } else {
        input.classList.remove("error-border");
        errorEl.style.display = "none";
    }
    return isValid;
}


function sendUnifiedOrder() {
    const sendBtn = document.getElementById('sendBtn');
    
    if (sendBtn.disabled) {
        return;
    }
    
    // --- ×•×•×œ×™×“×¦×™×” ---
    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const time = document.getElementById("time").value.trim();
    const pay = document.querySelector('input[name="pay"]:checked');

    let isFormValid = true;

    if (!validateField("name", "error-name", v => v.length > 0, "× × ×œ××œ× ××ª ×”×©×.")) isFormValid = false;
    if (!validateField("phone", "error-phone", v => v.length > 0, "× × ×œ××œ× ××ª ×”×˜×œ×¤×•×Ÿ.")) isFormValid = false;
    
    const isTimeValid = time && time >= "16:00" && time <= "20:00";
    if (!validateField("time", "error-time", () => isTimeValid, "× × ×œ×‘×—×•×¨ ×©×¢×” ×‘×ª×—×•× 16:00 ×¢×“ 20:00.")) isFormValid = false;

    const errorPayEl = document.getElementById("error-pay");
    const paymentOptionsEl = document.getElementById("payment-options");

    if (!pay) {
        paymentOptionsEl.classList.add("error-border");
        errorPayEl.style.display = "block";
        isFormValid = false;
    } else {
        paymentOptionsEl.classList.remove("error-border");
        errorPayEl.style.display = "none";
    }

    if (!isFormValid) {
        alert("× × ×œ×ª×§×Ÿ ××ª ×”×©×“×•×ª ×”××¡×•×× ×™× ×‘××“×•× ×œ×¤× ×™ ×”×©×œ×™×—×”.");
        return;
    }

    // --- ×× ×™×¢×ª ×©×œ×™×—×” ×›×¤×•×œ×” ---
    sendBtn.disabled = true; 
    sendBtn.innerText = "×©×•×œ×— ×”×–×× ×”, × × ×œ×”××ª×™×Ÿ...";

    // --- × ×ª×•× ×™ ×”×–×× ×” ---
    const qty = Number(document.getElementById("qty").value);
    const notes = document.getElementById("notes").value;
    const totalPrice = qty * PRICE;


    // 1. ×™×¦×™×¨×ª ×”×•×“×¢×ª ×”××™×©×•×¨ ×©××ª×” ×©×•×œ×— ×œ×œ×§×•×— (× ×•×¡×— ×”×¢×ª×§/×”×“×‘×§)
    const confirmationMsgForCopy = `
*--- âœ‚ï¸ ×”×ª×—×œ ×”×¢×ª×§×” ×œ×›××Ÿ âœ‚ï¸ ---*
×©×œ×•× ${name}, ×ª×•×“×” ×¨×‘×” ×¢×œ ×”×–×× ×ª×š! ğŸ™

×§×™×‘×œ× ×• ××ª ×”×”×–×× ×” ×©×œ×š ×œ×•×•×¤×œ ×‘×œ×’×™ ×¢×œ ××§×œ:
*××¡×¤×¨ ×¤×¨×™×˜×™×:* ${qty} ×•×•×¤×œ×™×
*×¡×”"×› ×œ×ª×©×œ×•×:* ${totalPrice} ×©"×—
*×©×¢×ª ××™×¡×•×£ ×¨×¦×•×™×”:* ${time} â°
*×××¦×¢×™ ×ª×©×œ×•×:* ${pay.value}

× ×©×ª×“×œ ×œ×”×›×™×Ÿ ××ª ×”×”×–×× ×” ×‘×“×™×•×§ ×‘×©×¢×” ×©×¦×™×™× ×ª.
× × ×œ× ×œ×©×›×•×— ×œ×¦×¨×£ ××™×©×•×¨ ×ª×©×œ×•× (×× ×©×™×œ××ª ×‘×‘×™×˜/×¤×™×™×‘×•×§×¡).
××—×›×™× ×œ×š! ğŸ˜Š
*--- ğŸ›‘ ×¡×™×™× ×”×¢×ª×§×” ×œ×›××Ÿ ğŸ›‘ ---*
`;


    // 2. ×™×¦×™×¨×ª ×”×•×“×¢×ª ×”×”×–×× ×” ×©× ×©×œ×—×ª ××œ×™×š (×”×¢×¡×§)
    let orderMsg = `ğŸ”” *×”×–×× ×” ×—×“×©×” (×•×•×¤×œ ×‘×œ×’×™)* ğŸ””
==============================
*×¤×¨×˜×™ ×œ×§×•×—:*
ğŸ‘¤ *×©×*: ${name}
ğŸ“ *×˜×œ×¤×•×Ÿ*: ${phone}
â° *×©×¢×” ×¨×¦×•×™×” ×œ××™×¡×•×£*: ${time}
ğŸ’° *×¡×”"×› ×œ×ª×©×œ×•×*: ${totalPrice} ×©"×—
ğŸ’µ *×××¦×¢×™ ×ª×©×œ×•×*: ${pay.value}
==============================
*×¤×™×¨×•×˜ ×”×”×–×× ×”:*
`;

    for (let i = 1; i <= qty; i++) {
        const sauces = [...document.querySelectorAll(`input[name="sauce_${i}"]:checked`)]
                        .map(x => x.value).join(", ") || "×œ×œ× ×¨×˜×‘×™×";
        const tops = [...document.querySelectorAll(`input[name="top_${i}"]:checked`)]
                        .map(x => x.value).join(", ") || "×œ×œ× ×ª×•×¡×¤×•×ª";
        const extras = [...document.querySelectorAll(`input[name="extra_${i}"]:checked`)]
                        .map(x => x.value).join(", ") || "×œ×œ× ×¤×™× ×™×©";

        orderMsg += `
*×•×•×¤×œ #${i}*:
ğŸ« ×¨×˜×‘×™×: ${sauces}
ğŸ¬ ×ª×•×¡×¤×•×ª: ${tops}
âœ¨ ××¢×œ: ${extras}
`;
    }
    
    if (notes) orderMsg += `\nğŸ“ *×”×¢×¨×•×ª ×›×œ×œ×™×•×ª*: ${notes}`;
    
    orderMsg += `
==============================
${pay.value !== "××–×•××Ÿ" ? 'ğŸ”´ *×”×¢×¨×” ×œ×ª×©×œ×•×:* ×”×œ×§×•×— ××ª×‘×§×© ×œ×¦×¨×£ ××™×©×•×¨ ×ª×©×œ×•× ××™×“.' : ''}
${confirmationMsgForCopy}
`;


    // 3. ×¤×ª×™×—×ª ×”×—×œ×•×Ÿ
    const orderUrl = "https://wa.me/" + MY_PHONE_NUMBER + "?text=" + encodeURIComponent(orderMsg);
    window.open(orderUrl, "_blank");
    
    // ××™×¤×•×¡ ×”×›×¤×ª×•×¨ ×•× ×™×§×•×™ ×”×˜×•×¤×¡ ×œ××—×¨ ×©×œ×™×—×”
    setTimeout(() => {
        sendBtn.disabled = false;
        sendBtn.innerText = "×©×œ×™×—×ª ×”×–×× ×” ×œ×•×•××˜×¡××¤";
        resetForm(); 
    }, 1500);
}

// ×”×¦×’×ª ××¡×¤×¨×™ ×ª×©×œ×•×
document.querySelectorAll('input[name="pay"]').forEach(r => {
    r.addEventListener("change", () => {
        // [.. ×§×•×“ ×œ×”×¦×’×ª ×¤×¨×˜×™ ×ª×©×œ×•× ..]
        const val = r.value;
        let txt = "";
        const uploadBox = document.getElementById("paymentUploadInfo");

        if (val === "×‘×™×˜") {
            txt = "ğŸ“² ××¡×¤×¨ ×œ×ª×©×œ×•× ×‘×‘×™×˜: 050-6205953";
            uploadBox.style.display = "block";
        } else if (val === "×¤×™×™×‘×•×§×¡") {
            txt = "ğŸ“² ××¡×¤×¨ ×œ×ª×©×œ×•× ×‘×¤×™×™×‘×•×§×¡: 054-2296540";
            uploadBox.style.display = "block";
        } else if (val === "××–×•××Ÿ") {
            txt = "ğŸ’µ ×ª×©×œ×•× ××¦×œ ××©×¤×—×ª ×˜×™ (×‘××™×¡×•×£)";
            uploadBox.style.display = "none";
        }

        const infoBox = document.getElementById("paymentInfo");
        infoBox.innerText = txt;
        infoBox.style.display = "block";
    });
});
</script>

</body>
</html>